{
  "info": {
    "adventure_count": 1,
    "episode_count": 35,
    "exercise_count": 0
  },
  "042": {
    "kind": "episode",
    "counter": 1,
    "context": "\nOh dear, what happened? It seems that I am the only survivor of the air crash. Wow, there are some villages on this island.\n\n```sql\nSELECT *\nFROM village\n```",
    "statement": "Copy-paste the previous query. After the star `*`, add a comma and the given formula. Execute the complete query.",
    "salt": "042",
    "formula": "salt_042(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT *\nFROM village",
        "result_head": "<table>\n    <tr>\n        <th>villageid</th>\n        <th>name</th>\n        <th>chief</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>1</td>\n        <td>Monkeycity</td>\n        <td>1</td>\n        <td>626144185414</td>\n        <td>280010183117016</td>\n    </tr>\n    <tr>\n        <td>2</td>\n        <td>Cucumbertown</td>\n        <td>6</td>\n        <td>433400391491</td>\n        <td>280010183117016</td>\n    </tr>\n</table>\nTotal: 3 rows affected.",
        "token": "280010183117016"
      }
    ],
    "adventure": 1
  },
  "280010183117016": {
    "kind": "episode",
    "counter": 2,
    "context": "It seems there are a few people living in these villages.",
    "statement": "How can you see a list of all inhabitants?",
    "salt": "002",
    "formula": "salt_002(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT *\nFROM inhabitant",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>1</td>\n        <td>Paul Bakerman</td>\n        <td>1</td>\n        <td>m</td>\n        <td>baker</td>\n        <td>850</td>\n        <td>friendly</td>\n        <td>646611776879</td>\n        <td>127572182569252</td>\n    </tr>\n    <tr>\n        <td>2</td>\n        <td>Ernest Perry</td>\n        <td>3</td>\n        <td>m</td>\n        <td>weaponsmith</td>\n        <td>280</td>\n        <td>friendly</td>\n        <td>630197013484</td>\n        <td>127572182569252</td>\n    </tr>\n</table>\nTotal: 19 rows affected.",
        "token": "127572182569252"
      }
    ],
    "adventure": 1
  },
  "127572182569252": {
    "kind": "episode",
    "counter": 3,
    "context": "\nWoah, so many people!\n\nMan! I'm hungry. I will go and find a butcher to ask for some free sausages.\n\n```sql\nSELECT *\nFROM inhabitant\nWHERE job = 'butcher'\n```",
    "statement": "Copy-paste the previous query, add the given formula, and execute it.",
    "salt": "048",
    "formula": "salt_048(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT *\nFROM inhabitant A\nWHERE job = 'butcher'",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>6</td>\n        <td>Gerry Slaughterer</td>\n        <td>2</td>\n        <td>m</td>\n        <td>butcher</td>\n        <td>4850</td>\n        <td>evil</td>\n        <td>856968177321</td>\n        <td>278655325129117</td>\n    </tr>\n    <tr>\n        <td>7</td>\n        <td>Peter Slaughterer</td>\n        <td>3</td>\n        <td>m</td>\n        <td>butcher</td>\n        <td>3250</td>\n        <td>evil</td>\n        <td>681036005590</td>\n        <td>278655325129117</td>\n    </tr>\n</table>\nTotal: 4 rows affected.",
        "token": "278655325129117"
      }
    ],
    "adventure": 1
  },
  "278655325129117": {
    "kind": "episode",
    "counter": 4,
    "context": "\n\n– There you are! Enjoy your meal! But take care of yourself. As long as you are unarmed, stay away from villains. Not everyone on this island is friendly.  \n– Thank you, Edward!",
    "statement": "Okay, let's see who is friendly on this island...",
    "salt": "023",
    "formula": "salt_023(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT *\nFROM inhabitant\nWHERE state = 'friendly'",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>1</td>\n        <td>Paul Bakerman</td>\n        <td>1</td>\n        <td>m</td>\n        <td>baker</td>\n        <td>850</td>\n        <td>friendly</td>\n        <td>646611776879</td>\n        <td>49877984153702</td>\n    </tr>\n    <tr>\n        <td>2</td>\n        <td>Ernest Perry</td>\n        <td>3</td>\n        <td>m</td>\n        <td>weaponsmith</td>\n        <td>280</td>\n        <td>friendly</td>\n        <td>630197013484</td>\n        <td>49877984153702</td>\n    </tr>\n</table>\nTotal: 11 rows affected.",
        "token": "49877984153702"
      }
    ],
    "adventure": 1
  },
  "49634567641071": {
    "kind": "hint",
    "counter": 4,
    "text": "Some inhabitants are neither friendly or evil.",
    "query": "SELECT *\n     , salt_023(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE state != 'evil'"
  },
  "48038106262884": {
    "kind": "hint",
    "counter": 4,
    "text": "Filter out the evil inhabitants, not the friendly ones.",
    "query": "SELECT *\n     , salt_023(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE state = 'evil'"
  },
  "36544000811616": {
    "kind": "hint",
    "counter": 4,
    "text": "Filter out the evil inhabitants.",
    "query": "SELECT *\n     , salt_023(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant"
  },
  "49877984153702": {
    "kind": "episode",
    "counter": 5,
    "context": "\nThere is no way around getting a sword for myself. ",
    "statement": "Now try to find a friendly weaponsmith to forge you one.\n\n_Tip._ You can combine predicates in the `WHERE` clause with `AND`.",
    "salt": "060",
    "formula": "salt_060(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT *\nFROM inhabitant\nWHERE state = 'friendly'\n    AND job = 'weaponsmith'",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>2</td>\n        <td>Ernest Perry</td>\n        <td>3</td>\n        <td>m</td>\n        <td>weaponsmith</td>\n        <td>280</td>\n        <td>friendly</td>\n        <td>630197013484</td>\n        <td>111347585921835</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "111347585921835"
      }
    ],
    "adventure": 1
  },
  "111347585921835": {
    "kind": "episode",
    "counter": 6,
    "context": "\nHm, that's very few.",
    "statement": "Maybe other friendly smiths can help you out, e.g. a blacksmith.\n\n_Tip._ Try out: job LIKE '%smith' to find all inhabitants whose job ends with 'smith' (% is a wildcard for any number of characters).",
    "salt": "069",
    "formula": "salt_069(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT *\nFROM inhabitant\nWHERE state = 'friendly'\n    AND job LIKE '%smith'",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>2</td>\n        <td>Ernest Perry</td>\n        <td>3</td>\n        <td>m</td>\n        <td>weaponsmith</td>\n        <td>280</td>\n        <td>friendly</td>\n        <td>630197013484</td>\n        <td>71493821063775</td>\n    </tr>\n    <tr>\n        <td>10</td>\n        <td>Peter Drummer</td>\n        <td>1</td>\n        <td>m</td>\n        <td>smith</td>\n        <td>600</td>\n        <td>friendly</td>\n        <td>445353142598</td>\n        <td>71493821063775</td>\n    </tr>\n</table>\nTotal: 3 rows affected.",
        "token": "71493821063775"
      }
    ],
    "adventure": 1
  },
  "70387888034034": {
    "kind": "hint",
    "counter": 6,
    "text": "Keep all villagers whose job's name ends with 'smith' (e.g., 'smith', 'blacksmith', etc.).",
    "query": "SELECT *\n     , salt_069(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE state = 'friendly'\n    AND job LIKE 'smith'"
  },
  "76307533465793": {
    "kind": "hint",
    "counter": 6,
    "text": "Filter out the villagers whose job's name doesn't ends with 'smith'.",
    "query": "SELECT *\n     , salt_069(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE state = 'friendly'"
  },
  "73596625706163": {
    "kind": "hint",
    "counter": 6,
    "text": "Filter out the villagers which are not friendly.",
    "query": "SELECT *\n     , salt_069(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE job LIKE '%smith'"
  },
  "71493821063775": {
    "kind": "episode",
    "counter": 7,
    "context": "\nThat looks better! I will go and visit those smiths.\n\n– Hi stranger! Where are you going? I'm Paul, I'm the major of Monkeycity. I will go ahead and register you as a citizen.\n\n```sql\nINSERT INTO inhabitant (name, villageid, gender, job, gold, state) VALUES ('Stranger', 1, '?', '?', 0, '?')\n```\n\n– No need to call me stranger!",
    "statement": "First, execute the `INSERT` query. Then, look for your personid.\n\n_Tip._ In former queries, the * stands for: all columns. Instead of the star, you can also address one or more columns (separated by a comma) and you will only get the columns you need.",
    "salt": "090",
    "formula": "salt_090(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "INSERT INTO inhabitant (name, villageid, gender, job, gold, state)\nVALUES ('Stranger', 1, '?', '?', 0, '?');\n\n\nSELECT personid\nFROM inhabitant\nWHERE name = 'Stranger';",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>20</td>\n        <td>30398186716581</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "30398186716581"
      }
    ],
    "adventure": 1
  },
  "30529521407667": {
    "kind": "hint",
    "counter": 7,
    "text": "Oops, it seems you have executed the `INSERT` query twice or more. Execute the following queries to cancel all these insertions: DELETE from inhabitant WHERE name = 'Stranger'; RESET inhabitant;",
    "query": "INSERT INTO inhabitant (name, villageid, gender, job, gold, state)\nVALUES ('Stranger', 1, '?', '?', 0, '?');\n\nSELECT personid\n     , salt_090(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE name = 'Stranger';"
  },
  "29198809911474": {
    "kind": "hint",
    "counter": 7,
    "text": "Oops, it seems you have executed the `INSERT` query twice or more. Execute the following queries to cancel all these insertions: DELETE from inhabitant WHERE name = 'Stranger'; RESET inhabitant;",
    "query": "INSERT INTO inhabitant (name, villageid, gender, job, gold, state)\nVALUES ('Stranger', 1, '?', '?', 0, '?');\n\nSELECT personid\n     , salt_090(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE name = 'Stranger';",
    "salt": "090"
  },
  "29560835575636": {
    "kind": "hint",
    "counter": 7,
    "text": "Oops, it seems you have executed the `INSERT` query twice or more. Execute the following queries to cancel all these insertions: DELETE from inhabitant WHERE name = 'Stranger'; RESET inhabitant;",
    "query": "INSERT INTO inhabitant (name, villageid, gender, job, gold, state)\nVALUES ('Stranger', 1, '?', '?', 0, '?');\n\nSELECT personid\n     , salt_090(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE name = 'Stranger';",
    "salt": "090"
  },
  "28658891523095": {
    "kind": "hint",
    "counter": 7,
    "text": "Oops, it seems you have executed the `INSERT` query twice or more. Execute the following queries to cancel all these insertions: DELETE from inhabitant WHERE name = 'Stranger'; RESET inhabitant;",
    "query": "INSERT INTO inhabitant (name, villageid, gender, job, gold, state)\nVALUES ('Stranger', 1, '?', '?', 0, '?');\n\nSELECT personid\n     , salt_090(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE name = 'Stranger';",
    "salt": "090"
  },
  "30398186716581": {
    "kind": "episode",
    "counter": 8,
    "context": "\n\n– Hi Ernest! How much is a sword?  \n– I can offer to make you a sword for 150 gold. That's the cheapest you will find!",
    "statement": "How much gold do you have?",
    "salt": "099",
    "formula": "salt_099(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT gold\nFROM inhabitant\nWHERE personid = 20",
        "result_head": "<table>\n    <tr>\n        <th>gold</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>0</td>\n        <td>8348573347279</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "8348573347279"
      }
    ],
    "adventure": 1
  },
  "16427621247298": {
    "kind": "hint",
    "counter": 8,
    "text": "Restrict the result to the Stranger's row (personid: 20).",
    "query": "SELECT personid, gold\n     , salt_099(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant"
  },
  "8348573347279": {
    "kind": "episode",
    "counter": 9,
    "context": "\nDamn! No mon, no fun. There has to be another option to earn gold other than going to work. Maybe I could collect ownerless items and sell them!",
    "statement": "Make a list of all items that don't belong to anyone.\n\n_Tip._ You can recognize ownerless items by: WHERE owner IS NULL",
    "salt": "073",
    "formula": "salt_073(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT *\nFROM item\nWHERE owner IS NULL",
        "result_head": "<table>\n    <tr>\n        <th>item</th>\n        <th>owner</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>bucket</td>\n        <td>None</td>\n        <td>798643833227</td>\n        <td>250823105679734</td>\n    </tr>\n    <tr>\n        <td>carton</td>\n        <td>None</td>\n        <td>255607005723</td>\n        <td>250823105679734</td>\n    </tr>\n</table>\nTotal: 6 rows affected.",
        "token": "250823105679734"
      }
    ],
    "adventure": 1
  },
  "250823105679734": {
    "kind": "episode",
    "counter": 10,
    "context": "So much cool stuff!\n\nYay, a coffee cup. Let's collect it!\n\n```sql\nUPDATE item\nSET owner = 20\nWHERE item = 'coffee cup'\n```",
    "statement": "Execute the `UPDATE` query, and check the `item` table afterwards.",
    "salt": "093",
    "formula": "salt_093(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE item\nSET owner = 20\nWHERE item = 'coffee cup';\n\n\nSELECT *\nFROM item",
        "result_head": "<table>\n    <tr>\n        <th>item</th>\n        <th>owner</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>bucket</td>\n        <td>None</td>\n        <td>798643833227</td>\n        <td>112781382726964</td>\n    </tr>\n    <tr>\n        <td>carton</td>\n        <td>None</td>\n        <td>255607005723</td>\n        <td>112781382726964</td>\n    </tr>\n</table>\nTotal: 9 rows affected.",
        "token": "112781382726964"
      }
    ],
    "adventure": 1
  },
  "112781382726964": {
    "kind": "episode",
    "counter": 11,
    "context": "",
    "statement": "Do you know a trick how to collect all the ownerless items? Afterwards, list all of the items you own.",
    "salt": "033",
    "formula": "salt_033(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE item\nSET owner = 20\nWHERE owner IS NULL;\n\n\nSELECT item\nFROM item\nWHERE owner = 20",
        "result_head": "<table>\n    <tr>\n        <th>item</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>bucket</td>\n        <td>140361992167979</td>\n    </tr>\n    <tr>\n        <td>carton</td>\n        <td>140361992167979</td>\n    </tr>\n</table>\nTotal: 6 rows affected.",
        "token": "140361992167979"
      },
      {
        "query": "UPDATE item\nSET owner = 20;\n\n\nSELECT item\nFROM item",
        "result_head": "<table>\n    <tr>\n        <th>item</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>bucket</td>\n        <td>134094834306231</td>\n    </tr>\n    <tr>\n        <td>carton</td>\n        <td>134094834306231</td>\n    </tr>\n</table>\nTotal: 9 rows affected.",
        "token": "134094834306231"
      }
    ],
    "adventure": 1
  },
  "137567818264690": {
    "kind": "hint",
    "counter": 11,
    "text": "It seems you have failed to collect any other ownerless item. Remember: comparing to `NULL` with the `=` operator always returns... `NULL`. You need the special operator `IS` instead.",
    "query": "SELECT item\n     , salt_033(sum(nn(hash)) OVER ()) AS token\nFROM item\nWHERE item = 'coffee cup'"
  },
  "133844634368524": {
    "kind": "hint",
    "counter": 11,
    "text": "Restrict the result to the Stranger's rows (personid: 20).",
    "query": "SELECT item\n     , salt_033(sum(nn(hash)) OVER ()) AS token\nFROM item"
  },
  "134094834306231": {
    "kind": "episode",
    "counter": 12,
    "context": "So greedy! You've snapped up all items, even those that already had an owner.",
    "statement": "Let's give them back to their rightful owners: the cane to 5, the hammer to 2 and the rope to 17. Afterwards, list all of the items you own.",
    "salt": "025",
    "formula": "salt_025(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE item\nSET owner = 5\nWHERE item = 'cane';\n\nUPDATE item\nSET owner = 2\nWHERE item = 'hammer';\n\nUPDATE item\nSET owner = 17\nWHERE item = 'rope';\n\nSELECT item\nFROM item\nWHERE owner = 20",
        "result_head": "<table>\n    <tr>\n        <th>item</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>bucket</td>\n        <td>206536196373822</td>\n    </tr>\n    <tr>\n        <td>carton</td>\n        <td>206536196373822</td>\n    </tr>\n</table>\nTotal: 6 rows affected.",
        "token": "206536196373822"
      }
    ],
    "adventure": 1
  },
  "206536196373822": {
    "kind": "episode",
    "counter": 13,
    "context": "",
    "statement": "Find a friendly inhabitant who is either a merchant or a dealer. Maybe they want to buy some of your items.",
    "salt": "024",
    "formula": "salt_024(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "solution_preamble": "With a logical `OR`.",
        "query": "SELECT *\nFROM inhabitant\nWHERE state = 'friendly'\n    AND (job = 'merchant' OR job = 'dealer')",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>4</td>\n        <td>Carl Ox</td>\n        <td>1</td>\n        <td>m</td>\n        <td>merchant</td>\n        <td>250</td>\n        <td>friendly</td>\n        <td>850110253458</td>\n        <td>166475576240457</td>\n    </tr>\n    <tr>\n        <td>12</td>\n        <td>Otto Alexander</td>\n        <td>2</td>\n        <td>m</td>\n        <td>dealer</td>\n        <td>680</td>\n        <td>friendly</td>\n        <td>591142648847</td>\n        <td>166475576240457</td>\n    </tr>\n</table>\nTotal: 3 rows affected.",
        "token": "166475576240457"
      },
      {
        "solution_preamble": "With the `IN` operator (recommended). A cleaner, more scalable way to check a column against multiple values.",
        "query": "SELECT *\nFROM inhabitant\nWHERE state = 'friendly'\n    AND job in ('merchant', 'dealer')",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>4</td>\n        <td>Carl Ox</td>\n        <td>1</td>\n        <td>m</td>\n        <td>merchant</td>\n        <td>250</td>\n        <td>friendly</td>\n        <td>850110253458</td>\n        <td>166475576240457</td>\n    </tr>\n    <tr>\n        <td>12</td>\n        <td>Otto Alexander</td>\n        <td>2</td>\n        <td>m</td>\n        <td>dealer</td>\n        <td>680</td>\n        <td>friendly</td>\n        <td>591142648847</td>\n        <td>166475576240457</td>\n    </tr>\n</table>\nTotal: 3 rows affected.",
        "token": "166475576240457"
      }
    ],
    "adventure": 1
  },
  "140361992167979": {
    "kind": "episode",
    "counter": 13,
    "context": "",
    "statement": "Find a friendly inhabitant who is either a merchant or a dealer. Maybe they want to buy some of your items.",
    "salt": "024",
    "formula": "salt_024(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "solution_preamble": "With a logical `OR`.",
        "query": "SELECT *\nFROM inhabitant\nWHERE state = 'friendly'\n    AND (job = 'merchant' OR job = 'dealer')",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>4</td>\n        <td>Carl Ox</td>\n        <td>1</td>\n        <td>m</td>\n        <td>merchant</td>\n        <td>250</td>\n        <td>friendly</td>\n        <td>850110253458</td>\n        <td>166475576240457</td>\n    </tr>\n    <tr>\n        <td>12</td>\n        <td>Otto Alexander</td>\n        <td>2</td>\n        <td>m</td>\n        <td>dealer</td>\n        <td>680</td>\n        <td>friendly</td>\n        <td>591142648847</td>\n        <td>166475576240457</td>\n    </tr>\n</table>\nTotal: 3 rows affected.",
        "token": "166475576240457"
      },
      {
        "solution_preamble": "With the `IN` operator (recommended). A cleaner, more scalable way to check a column against multiple values.",
        "query": "SELECT *\nFROM inhabitant\nWHERE state = 'friendly'\n    AND job in ('merchant', 'dealer')",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>4</td>\n        <td>Carl Ox</td>\n        <td>1</td>\n        <td>m</td>\n        <td>merchant</td>\n        <td>250</td>\n        <td>friendly</td>\n        <td>850110253458</td>\n        <td>166475576240457</td>\n    </tr>\n    <tr>\n        <td>12</td>\n        <td>Otto Alexander</td>\n        <td>2</td>\n        <td>m</td>\n        <td>dealer</td>\n        <td>680</td>\n        <td>friendly</td>\n        <td>591142648847</td>\n        <td>166475576240457</td>\n    </tr>\n</table>\nTotal: 3 rows affected.",
        "token": "166475576240457"
      }
    ],
    "adventure": 1
  },
  "166447123487581": {
    "kind": "hint",
    "counter": 13,
    "text": "Your result include one evil villager. Use both `AND` and `OR`, and don't forget to put the brackets correctly.",
    "query": "SELECT *\n     , salt_024(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE state = 'friendly' AND job = 'merchant'\n    OR job = 'dealer'"
  },
  "161728381954968": {
    "kind": "hint",
    "counter": 13,
    "text": "You have found inhabitants who are either friendly, or dealers, or merchants, but \"friendly\" is not an option.",
    "query": "SELECT *\n     , salt_024(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE state = 'friendly'\n    OR job = 'dealer'\n    OR job = 'merchant'"
  },
  "165711365329111": {
    "kind": "hint",
    "counter": 13,
    "text": "Include the friendly merchants too.",
    "query": "SELECT *\n     , salt_024(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE state = 'friendly' AND job = 'dealer'"
  },
  "165881901973859": {
    "kind": "hint",
    "counter": 13,
    "text": "Include the friendly dealers too.",
    "query": "SELECT *\n     , salt_024(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE state = 'friendly' AND job = 'merchant'"
  },
  "166475576240457": {
    "kind": "episode",
    "counter": 14,
    "context": "\n\n– I'd like to get the ring and the teapot. The rest is nothing but scrap. Please give me the two items. My `personid` is 15.",
    "statement": "Afterwards, check the items that she owns.",
    "salt": "034",
    "formula": "salt_034(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE item\nSET owner = 15\nWHERE item IN ('ring', 'teapot');\n\n\nSELECT *\nFROM item\nWHERE owner = 15",
        "result_head": "<table>\n    <tr>\n        <th>item</th>\n        <th>owner</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>ring</td>\n        <td>15</td>\n        <td>285279987781</td>\n        <td>261352685198133</td>\n    </tr>\n    <tr>\n        <td>teapot</td>\n        <td>15</td>\n        <td>950599138709</td>\n        <td>261352685198133</td>\n    </tr>\n</table>\nTotal: 2 rows affected.",
        "token": "261352685198133"
      }
    ],
    "adventure": 1
  },
  "261352685198133": {
    "kind": "episode",
    "counter": 15,
    "context": "\n\n— Thank you! Here, some gold!",
    "statement": "Transfer 120 from Helen's gold to yours, and then check the new amounts of your two rows.\n\n_Tip._ SQL has no “transfer” operation. Use two `UPDATE` statements.",
    "salt": "091",
    "formula": "salt_091(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE inhabitant\nSET gold = gold - 120\nWHERE personid = 15;\n\n\nUPDATE inhabitant\nSET gold = gold + 120\nWHERE personid = 20;\n\n\nSELECT name\n     , gold\nFROM inhabitant\nWHERE personid IN (15, 20)",
        "result_head": "<table>\n    <tr>\n        <th>name</th>\n        <th>gold</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>Helen Grasshead</td>\n        <td>560</td>\n        <td>35110542179316</td>\n    </tr>\n    <tr>\n        <td>Stranger</td>\n        <td>120</td>\n        <td>35110542179316</td>\n    </tr>\n</table>\nTotal: 2 rows affected.",
        "token": "35110542179316"
      },
      {
        "query": "UPDATE inhabitant\nSET gold = gold - 120\nWHERE personid = 15;\n\n\nSELECT name\n     , gold\nFROM inhabitant\nWHERE personid IN (15, 20)",
        "result_head": "<table>\n    <tr>\n        <th>name</th>\n        <th>gold</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>Helen Grasshead</td>\n        <td>560</td>\n        <td>34877944868442</td>\n    </tr>\n    <tr>\n        <td>Stranger</td>\n        <td>0</td>\n        <td>34877944868442</td>\n    </tr>\n</table>\nTotal: 2 rows affected.",
        "token": "34877944868442"
      },
      {
        "query": "UPDATE inhabitant\nSET gold = gold + 120\nWHERE personid = 20;\n\n\nSELECT name\n     , gold\nFROM inhabitant\nWHERE personid IN (15, 20)",
        "result_head": "<table>\n    <tr>\n        <th>name</th>\n        <th>gold</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>Helen Grasshead</td>\n        <td>680</td>\n        <td>34756549418683</td>\n    </tr>\n    <tr>\n        <td>Stranger</td>\n        <td>120</td>\n        <td>34756549418683</td>\n    </tr>\n</table>\nTotal: 2 rows affected.",
        "token": "34756549418683"
      }
    ],
    "adventure": 1
  },
  "23228768719000": {
    "kind": "hint",
    "counter": 15,
    "text": "Restrict the result to the row of Helen (15) and yours (20).",
    "query": "SELECT name\n     , gold\n     , salt_091(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nLIMIT 1"
  },
  "25263687649022": {
    "kind": "hint",
    "counter": 15,
    "text": "Restrict the result to the row of Helen (15) and yours (20).",
    "query": "SELECT name\n     , gold\n     , salt_091(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nlimit 1"
  },
  "25142560896863": {
    "kind": "hint",
    "counter": 15,
    "text": "Restrict the result to the row of Helen (15) and yours (20).",
    "query": "SELECT name\n     , gold\n     , salt_091(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nlimit 1",
    "salt": "091"
  },
  "34877944868442": {
    "kind": "episode",
    "counter": 16,
    "context": "",
    "statement": "You have correctly updated Helen's gold. Now update yours.",
    "salt": "075",
    "formula": "salt_075(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE inhabitant\nSET gold = gold + 120\nWHERE personid = 20;\n\n\nSELECT name\n     , gold\nFROM inhabitant\nWHERE personid IN (15, 20)",
        "result_head": "<table>\n    <tr>\n        <th>name</th>\n        <th>gold</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>Helen Grasshead</td>\n        <td>680</td>\n        <td>36005631554399</td>\n    </tr>\n    <tr>\n        <td>Stranger</td>\n        <td>240</td>\n        <td>36005631554399</td>\n    </tr>\n</table>\nTotal: 2 rows affected.",
        "token": "36005631554399"
      }
    ],
    "adventure": 1
  },
  "34756549418683": {
    "kind": "episode",
    "counter": 17,
    "context": "",
    "statement": "You have correctly updated your gold. Now update Helen's.",
    "salt": "076",
    "formula": "salt_076(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE inhabitant\nSET gold = gold - 120\nWHERE personid = 15;\n\n\nSELECT name\n     , gold\nFROM inhabitant\nWHERE personid IN (15, 20)",
        "result_head": "<table>\n    <tr>\n        <th>name</th>\n        <th>gold</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>Helen Grasshead</td>\n        <td>560</td>\n        <td>11047667535310</td>\n    </tr>\n    <tr>\n        <td>Stranger</td>\n        <td>240</td>\n        <td>11047667535310</td>\n    </tr>\n</table>\nTotal: 2 rows affected.",
        "token": "11047667535310"
      }
    ],
    "adventure": 1
  },
  "36005631554399": {
    "kind": "episode",
    "counter": 18,
    "context": "Unfortunately, that's not enough gold to buy a sword. Seems like I do have to work after all. Maybe it's not a bad idea to change my name from Stranger to my real name before I will apply for a job.",
    "statement": "Update your name to 'Leslie Qualls' and show the updated row.",
    "salt": "080",
    "formula": "salt_080(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE inhabitant\nSET name = 'Leslie Qualls'\nWHERE personid = 20;\n\n\nSELECT *\nFROM inhabitant\nWHERE personid = 20",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>20</td>\n        <td>Leslie Qualls</td>\n        <td>1</td>\n        <td>?</td>\n        <td>?</td>\n        <td>240</td>\n        <td>?</td>\n        <td>389732266343</td>\n        <td>17932999715393</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "17932999715393"
      }
    ],
    "adventure": 1
  },
  "11047667535310": {
    "kind": "episode",
    "counter": 18,
    "context": "Unfortunately, that's not enough gold to buy a sword. Seems like I do have to work after all. Maybe it's not a bad idea to change my name from Stranger to my real name before I will apply for a job.",
    "statement": "Update your name to 'Leslie Qualls' and show the updated row.",
    "salt": "080",
    "formula": "salt_080(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE inhabitant\nSET name = 'Leslie Qualls'\nWHERE personid = 20;\n\n\nSELECT *\nFROM inhabitant\nWHERE personid = 20",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>20</td>\n        <td>Leslie Qualls</td>\n        <td>1</td>\n        <td>?</td>\n        <td>?</td>\n        <td>240</td>\n        <td>?</td>\n        <td>389732266343</td>\n        <td>17932999715393</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "17932999715393"
      }
    ],
    "adventure": 1
  },
  "35110542179316": {
    "kind": "episode",
    "counter": 18,
    "context": "Unfortunately, that's not enough gold to buy a sword. Seems like I do have to work after all. Maybe it's not a bad idea to change my name from Stranger to my real name before I will apply for a job.",
    "statement": "Update your name to 'Leslie Qualls' and show the updated row.",
    "salt": "080",
    "formula": "salt_080(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE inhabitant\nSET name = 'Leslie Qualls'\nWHERE personid = 20;\n\n\nSELECT *\nFROM inhabitant\nWHERE personid = 20",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>20</td>\n        <td>Leslie Qualls</td>\n        <td>1</td>\n        <td>?</td>\n        <td>?</td>\n        <td>240</td>\n        <td>?</td>\n        <td>389732266343</td>\n        <td>17932999715393</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "17932999715393"
      }
    ],
    "adventure": 1
  },
  "28860022323271": {
    "kind": "hint",
    "counter": 18,
    "text": "Restrict the result to your row (20).",
    "query": "SELECT *\n     , salt_080(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nlimit 1"
  },
  "17913110945546": {
    "kind": "hint",
    "counter": 18,
    "text": "The name Qualls contains two 'l's.",
    "query": "UPDATE inhabitant\nSET name = 'Leslie Quals'\nWHERE personid = 20;\n\n\nSELECT *\n     , salt_080(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE personid = 20"
  },
  "17932999715393": {
    "kind": "episode",
    "counter": 19,
    "context": "",
    "statement": "Since baking is one of your hobbies, why not find a baker who you can work for?\n\n_Tip._ List all bakers and use `ORDER BY` gold to sort the results. `ORDER BY` gold `DESC` is even better because then the richest baker is on top.",
    "salt": "078",
    "formula": "salt_078((0.0) + sum(nn(hash)) OVER ()) AS token",
    "tweak": "gold on the last row",
    "solutions": [
      {
        "query": "SELECT *\nFROM inhabitant\nWHERE job = 'baker'\nORDER BY gold DESC",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>1</td>\n        <td>Paul Bakerman</td>\n        <td>1</td>\n        <td>m</td>\n        <td>baker</td>\n        <td>850</td>\n        <td>friendly</td>\n        <td>646611776879</td>\n        <td>34691307363878</td>\n    </tr>\n    <tr>\n        <td>9</td>\n        <td>Tiffany Drummer</td>\n        <td>1</td>\n        <td>f</td>\n        <td>baker</td>\n        <td>550</td>\n        <td>evil</td>\n        <td>592129557518</td>\n        <td>34691307363878</td>\n    </tr>\n</table>\nTotal: 3 rows affected.",
        "token": "34691307363878"
      }
    ],
    "adventure": 1
  },
  "34691307364334": {
    "kind": "hint",
    "counter": 19,
    "text": "Don't forget to sort the result by decreasing gold.",
    "query": "SELECT *\n     , salt_078({{x}} + sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE job = 'baker'"
  },
  "34691307363378": {
    "kind": "hint",
    "counter": 19,
    "text": "The gold must be sorted by decreasing order.",
    "query": "SELECT *\n     , salt_078({{x}} + sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE job = 'baker'\nORDER BY gold"
  },
  "34691307360644": {
    "kind": "hint",
    "counter": 19,
    "text": "Don't forget to update the token formula.",
    "query": "SELECT *\n     , salt_078(0 + sum(nn(hash)) OVER ()) AS token\nFROM inhabitant\nWHERE job = 'baker'"
  },
  "34691307363878": {
    "kind": "episode",
    "counter": 20,
    "context": "Aha, Paul! I know him!\n\n– Hi, you again! I saw you want to work as a baker? Okay! You will be paid 1 gold for 100 bread rolls.\n\n(8 hours later...)\n\n– Here, I made ten thousand bread rolls! I quit! This should be enough money to buy a sword. Let's see what happens with my gold balance.\n\nHere's your new sword, Losloo Qoolls! Now you can go everywhere.",
    "statement": "Transfer your salary (100) from Paul's gold to yours, and substract the price of the sword (150). Then, display your gold balance.",
    "salt": "010",
    "formula": "salt_010(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE inhabitant\nSET gold = gold - 100\nWHERE personid = 1;\n\n\nUPDATE inhabitant\nSET gold = gold + 100 - 150\nWHERE personid = 20;\n\n\nSELECT gold\nFROM inhabitant\nWHERE personid = 20",
        "result_head": "<table>\n    <tr>\n        <th>gold</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>190</td>\n        <td>156519988531042</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "156519988531042"
      }
    ],
    "adventure": 1
  },
  "156519988531042": {
    "kind": "episode",
    "counter": 21,
    "context": "\n\n– My name is Leslie qualls! Thanks anyway!",
    "statement": "Is there a pilot on this island by any chance? He could fly you home.",
    "salt": "086",
    "formula": "salt_086(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT *\nFROM inhabitant\nWHERE job = 'pilot'",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>8</td>\n        <td>Arthur Tailor</td>\n        <td>2</td>\n        <td>m</td>\n        <td>pilot</td>\n        <td>490</td>\n        <td>kidnapped</td>\n        <td>509268313479</td>\n        <td>228820229151258</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "228820229151258"
      }
    ],
    "adventure": 1
  },
  "228820229151258": {
    "kind": "episode",
    "counter": 22,
    "context": "Oh no, his state is 'kidnapped'.\n\nHorrible, the pilot is held captive by Dirty Dieter! I will show you a trick how to find out the name of the village where Dirty Dieter lives.\n\n```sql\nSELECT A.name\nFROM village A\nJOIN inhabitant B ON A.villageid = B.villageid\nWHERE B.name = 'Dirty Dieter'\n```",
    "statement": "Copy-paste the previous query, add the given formula, and execute it.",
    "salt": "029",
    "formula": "salt_029(sum(nn(A.hash) + nn(B.hash)) OVER ()) AS token",
    "solutions": [
      "The expression presented here is called a join. It combines the information of the `inhabitant`\ntable with information of the `village` table by matching `villageid` values.",
      {
        "query": "SELECT A.name\nFROM village A\nJOIN inhabitant B ON A.villageid = B.villageid\nWHERE B.name = 'Dirty Dieter'",
        "result_head": "<table>\n    <tr>\n        <th>name</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>Onionville</td>\n        <td>256416647551874</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "256416647551874"
      },
      {
        "solution_preamble": "Implicit `JOIN`. You may encounter a syntax where the join conditions are mixed with the filter conditions. This can make the query harder to understand, especially as the number of tables and conditions increases. While this method is still supported for backward compatibility, it is generally considered outdated. The explicit JOIN syntax is recommended for new SQL code.",
        "query": "SELECT A.name\nFROM village A, inhabitant B\nWHERE A.villageid = B.villageid\n  AND B.name = 'Dirty Dieter'",
        "result_head": "<table>\n    <tr>\n        <th>name</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>Onionville</td>\n        <td>256416647551874</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "256416647551874"
      }
    ],
    "adventure": 1
  },
  "256416647551874": {
    "kind": "episode",
    "counter": 23,
    "context": "\n\n– Thanks for the hint!",
    "statement": "Use the join to find out the chief's name of the village Onionville.\n\n_Tip._ In the column `chief` in the village table, the `personid` of the chief is stored.",
    "salt": "045",
    "formula": "salt_045(sum(nn(A.hash) + nn(B.hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT B.name\nFROM village A\nJOIN inhabitant B ON A.chief = B.personid\nWHERE A.name = 'Onionville'",
        "result_head": "<table>\n    <tr>\n        <th>name</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>Fred Dix</td>\n        <td>241551827838277</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "241551827838277"
      }
    ],
    "adventure": 1
  },
  "237791690290201": {
    "kind": "hint",
    "counter": 23,
    "text": "We are only interested in the chief of Onionville.",
    "query": "SELECT B.name\n     , salt_045(sum(nn(A.hash) + nn(B.hash)) OVER ()) AS token\nFROM village A\nJOIN inhabitant B ON A.chief = B.personid"
  },
  "234350336086754": {
    "kind": "hint",
    "counter": 23,
    "text": "Don't forget the join condition (`ON ...`). Without it, you make a cartesian product.",
    "query": "SELECT B.name\n     , salt_045(sum(nn(A.hash) + nn(B.hash)) OVER ()) AS token\nFROM village A, inhabitant B\nWHERE A.name = 'Onionville'"
  },
  "241551827838277": {
    "kind": "episode",
    "counter": 24,
    "context": "I've got it! I will visit Fred and ask him about Dirty Dieter and the pilot.\n\nUm, how many inhabitants does Onionville have?\n\n```sql\nSELECT COUNT(*) as population\nFROM inhabitant A\nJOIN village B ON A.villageid = B.villageid\nWHERE B.name = 'Onionville'\n```",
    "statement": "Copy-paste the previous query, add the given formula, and execute it.",
    "salt": "012",
    "formula": "salt_012(sum(avg(nn(A.hash) + nn(B.hash))) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT count(*) AS population\nFROM inhabitant A\nJOIN village B ON A.villageid = B.villageid\nWHERE B.name = 'Onionville'",
        "result_head": "<table>\n    <tr>\n        <th>population</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>8</td>\n        <td>238207576521752</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "238207576521752"
      }
    ],
    "adventure": 1
  },
  "238207576521752": {
    "kind": "episode",
    "counter": 25,
    "context": "\n\n– Hello Leslie Qualls, the pilot is held captive by Dirty Dieter in his sister's house.",
    "statement": "Shall I tell you how many women there are in Onionville? Nah, you can figure it out by yourself!\n\n_Tip._ Women show up as gender = 'f'.",
    "salt": "032",
    "formula": "salt_032((0.0) + sum(avg(nn(A.hash) + nn(B.hash))) OVER ()) AS token",
    "tweak": "this number",
    "solutions": [
      {
        "query": "SELECT count(*) AS women\nFROM inhabitant A\nJOIN village B ON A.villageid = B.villageid\n    AND B.name = 'Onionville'\n    AND gender = 'f'",
        "result_head": "<table>\n    <tr>\n        <th>women</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>1</td>\n        <td>41269257906868</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "41269257906868"
      }
    ],
    "adventure": 1
  },
  "39891969235649": {
    "kind": "hint",
    "counter": 25,
    "text": "This is the population of Onionville. We are only interested in its women.",
    "query": "SELECT count(*) AS women\n     , salt_032({{x}} + sum(avg(nn(A.hash) + nn(B.hash))) OVER ()) AS token\nFROM inhabitant A, village B\nWHERE A.villageid = B.villageid\n    AND B.name = 'Onionville'"
  },
  "40030811180335": {
    "kind": "hint",
    "counter": 25,
    "text": "This is the total number of women. We are only interested in those of Onionville.",
    "query": "SELECT count(*) AS women\n     , salt_032({{x}} + sum(avg(nn(A.hash) + nn(B.hash))) OVER ()) AS token\nFROM inhabitant A, village B\nWHERE A.villageid = B.villageid\n    AND gender = 'f'"
  },
  "39735907674280": {
    "kind": "hint",
    "counter": 25,
    "text": "Don't forget the join condition (`ON ...`).",
    "query": "SELECT count(*) AS women\n     , salt_032({{x}} + sum(avg(nn(A.hash) + nn(B.hash))) OVER ()) AS token\nFROM inhabitant A, village B\nWHERE gender = 'f'\n    AND B.name = 'Onionville'"
  },
  "41269257906868": {
    "kind": "episode",
    "counter": 26,
    "context": "Oh, only one woman.",
    "statement": "What's her name?",
    "salt": "036",
    "formula": "salt_036(sum(nn(A.hash) + nn(B.hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT A.name\nFROM inhabitant A\nJOIN village B ON A.villageid = B.villageid\nWHERE B.name = 'Onionville'\n    AND gender = 'f'",
        "result_head": "<table>\n    <tr>\n        <th>name</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>Dirty Diane</td>\n        <td>124758398389543</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "124758398389543"
      }
    ],
    "adventure": 1
  },
  "128750693527757": {
    "kind": "hint",
    "counter": 26,
    "text": "Restrict the result to Onionville.",
    "query": "SELECT A.name\n     , salt_036(sum(nn(A.hash) + nn(B.hash)) OVER ()) AS token\nFROM inhabitant A\nJOIN village B ON A.villageid = B.villageid\nWHERE gender = 'f'"
  },
  "130035311163695": {
    "kind": "hint",
    "counter": 26,
    "text": "Restrict the result to the women.",
    "query": "SELECT A.name\n     , salt_036(sum(nn(A.hash) + nn(B.hash)) OVER ()) AS token\nFROM inhabitant A\nJOIN village B ON A.villageid = B.villageid\nWHERE B.name = 'Onionville'"
  },
  "124758398389543": {
    "kind": "episode",
    "counter": 27,
    "context": "Let's go!\n\n– Leslie Qualls, if you hand me over the entire property of our nearby village Cucumbertown, I will release the pilot. I will show you now what this property consists of.\n\n```sql\nSELECT SUM(A.gold) as total\nFROM inhabitant A\nJOIN village B ON A.villageid = B.villageid\nWHERE B.name = 'Cucumbertown'\n```",
    "statement": "Copy-paste the previous query, add the given formula, and execute it.",
    "salt": "035",
    "formula": "salt_035(sum(avg(nn(A.hash) + nn(B.hash))) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT sum(A.gold) AS total\nFROM inhabitant A\nJOIN village B ON A.villageid = B.villageid\nWHERE B.name = 'Cucumbertown'",
        "result_head": "<table>\n    <tr>\n        <th>total</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>8860</td>\n        <td>152687633573299</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "152687633573299"
      }
    ],
    "adventure": 1
  },
  "152687633573299": {
    "kind": "episode",
    "counter": 28,
    "context": "Oh no, baking bread alone can't solve my problems. If I continue working and selling items though, I could earn more gold than the worth of gold inventories of all bakers, dealers and merchants together.",
    "statement": "Sum the gold of all these people.",
    "salt": "046",
    "formula": "salt_046((0.0) + sum(avg(nn(hash))) OVER ()) AS token",
    "tweak": "this sum",
    "solutions": [
      {
        "query": "SELECT sum(inhabitant.gold) AS total\nFROM inhabitant\nWHERE job IN ('baker', 'dealer', 'merchant')",
        "result_head": "<table>\n    <tr>\n        <th>total</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>3910</td>\n        <td>203591029657813</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "203591029657813"
      }
    ],
    "adventure": 1
  },
  "203589828702201": {
    "kind": "hint",
    "counter": 28,
    "text": "Restrict your queries to the bakers, dealers and merchants together.",
    "query": "SELECT sum(inhabitant.gold) AS total\n     , salt_046({{x}} + sum(avg(nn(hash))) OVER ()) AS token\nFROM inhabitant"
  },
  "203591029657813": {
    "kind": "episode",
    "counter": 29,
    "context": "That's not enough.\n\nLet's have a look at how much average gold people own, depending on their job.\n\n```sql\nSELECT job, avg(gold)\nFROM inhabitant\nGROUP BY job\nORDER BY avg(gold)\n```",
    "statement": "Copy-paste the previous query, add the given formula, and execute it.",
    "salt": "071",
    "formula": "salt_071(sum(avg(nn(hash))) OVER ()) AS token",
    "solutions": [
      {
        "query": "SELECT job\n     , avg(gold) AS average\nFROM inhabitant\nGROUP BY job\nORDER BY average",
        "result_head": "<table>\n    <tr>\n        <th>job</th>\n        <th>average</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>farmer</td>\n        <td>10.0</td>\n        <td>222052332563255</td>\n    </tr>\n    <tr>\n        <td>?</td>\n        <td>190.0</td>\n        <td>222052332563255</td>\n    </tr>\n</table>\nTotal: 11 rows affected.",
        "token": "222052332563255"
      }
    ],
    "adventure": 1
  },
  "222052332563255": {
    "kind": "episode",
    "counter": 30,
    "context": "Ok, so the only way is to mug the villains. Or I might as well go ahead and just kill Dirty Dieter with my sword!\n\n```sql\nDELETE\nFROM inhabitant\nWHERE name = 'Dirty Dieter'\n```",
    "statement": "Execute the previous query. Which item is now ownerless?",
    "salt": "018",
    "formula": "salt_018(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "DELETE\nFROM inhabitant\nWHERE name = 'Dirty Dieter';\n\n\nSELECT item\nFROM item\nWHERE owner IS NULL",
        "result_head": "<table>\n    <tr>\n        <th>item</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>cane</td>\n        <td>193773092890240</td>\n    </tr>\n</table>\nTotal: 1 row affected.",
        "token": "193773092890240"
      }
    ],
    "adventure": 1
  },
  "193773092890240": {
    "kind": "episode",
    "counter": 31,
    "context": "Dirty Diane: Heeeey! Now I'm very angry!\n\nWhat will you do next, Leslie Qualls?",
    "statement": "Delete Dirty Diane, and show the remaining inhabitants of Onionville (villageid 3).",
    "salt": "004",
    "formula": "salt_004(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "DELETE\nFROM inhabitant\nWHERE name = 'Dirty Diane';\n\n\nSELECT *\nFROM inhabitant\nWHERE villageid = 3",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>2</td>\n        <td>Ernest Perry</td>\n        <td>3</td>\n        <td>m</td>\n        <td>weaponsmith</td>\n        <td>280</td>\n        <td>friendly</td>\n        <td>630197013484</td>\n        <td>60216806700812</td>\n    </tr>\n    <tr>\n        <td>7</td>\n        <td>Peter Slaughterer</td>\n        <td>3</td>\n        <td>m</td>\n        <td>butcher</td>\n        <td>3250</td>\n        <td>evil</td>\n        <td>681036005590</td>\n        <td>60216806700812</td>\n    </tr>\n</table>\nTotal: 6 rows affected.",
        "token": "60216806700812"
      }
    ],
    "adventure": 1
  },
  "66225330703443": {
    "kind": "hint",
    "counter": 31,
    "text": "Restrict the result to the village of Onionville.",
    "query": "SELECT *\n     , salt_004(sum(nn(hash)) OVER ()) AS token\nFROM inhabitant"
  },
  "60216806700812": {
    "kind": "episode",
    "counter": 32,
    "context": "\n\n– Yeah! Now I release the pilot!<br>\n– Thank's for releasing me, Leslie Qualls! I will fly you home!<br>\n– I take my sword, some gold and lots of useless items with me as a souvenir.",
    "statement": "Change the pilot's status to 'friendly', your own status to 'emigrated', and show the table `inhabitant`.",
    "salt": "051",
    "formula": "salt_051(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE inhabitant\nSET state = 'friendly'\nWHERE job = 'pilot';\n\nSELECT *\nFROM inhabitant;",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>1</td>\n        <td>Paul Bakerman</td>\n        <td>1</td>\n        <td>m</td>\n        <td>baker</td>\n        <td>750</td>\n        <td>friendly</td>\n        <td>503254218482</td>\n        <td>225765442742136</td>\n    </tr>\n    <tr>\n        <td>2</td>\n        <td>Ernest Perry</td>\n        <td>3</td>\n        <td>m</td>\n        <td>weaponsmith</td>\n        <td>280</td>\n        <td>friendly</td>\n        <td>630197013484</td>\n        <td>225765442742136</td>\n    </tr>\n</table>\nTotal: 18 rows affected.",
        "token": "225765442742136"
      },
      {
        "query": "UPDATE inhabitant\nSET state = 'emigrated'\nWHERE personid = 20;\n\nSELECT *\nFROM inhabitant;",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>1</td>\n        <td>Paul Bakerman</td>\n        <td>1</td>\n        <td>m</td>\n        <td>baker</td>\n        <td>750</td>\n        <td>friendly</td>\n        <td>503254218482</td>\n        <td>225973728467568</td>\n    </tr>\n    <tr>\n        <td>2</td>\n        <td>Ernest Perry</td>\n        <td>3</td>\n        <td>m</td>\n        <td>weaponsmith</td>\n        <td>280</td>\n        <td>friendly</td>\n        <td>630197013484</td>\n        <td>225973728467568</td>\n    </tr>\n</table>\nTotal: 18 rows affected.",
        "token": "225973728467568"
      },
      {
        "query": "UPDATE inhabitant\nSET state = 'emigrated'\nWHERE personid = 20;\n\n\nUPDATE inhabitant\nSET state = 'friendly'\nWHERE job = 'pilot';\n\n\nSELECT *\nFROM inhabitant;",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>1</td>\n        <td>Paul Bakerman</td>\n        <td>1</td>\n        <td>m</td>\n        <td>baker</td>\n        <td>750</td>\n        <td>friendly</td>\n        <td>503254218482</td>\n        <td>225747327555713</td>\n    </tr>\n    <tr>\n        <td>2</td>\n        <td>Ernest Perry</td>\n        <td>3</td>\n        <td>m</td>\n        <td>weaponsmith</td>\n        <td>280</td>\n        <td>friendly</td>\n        <td>630197013484</td>\n        <td>225747327555713</td>\n    </tr>\n</table>\nTotal: 18 rows affected.",
        "token": "225747327555713"
      }
    ],
    "adventure": 1
  },
  "225765442742136": {
    "kind": "episode",
    "counter": 33,
    "context": "",
    "statement": "You have correctly updated the pilot's status. Now update yours to 'emigrated', and show the table `inhabitant`.",
    "salt": "052",
    "formula": "salt_052(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE inhabitant\nSET state = 'emigrated'\nWHERE personid = 20;\n\nSELECT *\nFROM inhabitant;",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>1</td>\n        <td>Paul Bakerman</td>\n        <td>1</td>\n        <td>m</td>\n        <td>baker</td>\n        <td>750</td>\n        <td>friendly</td>\n        <td>503254218482</td>\n        <td>255035326205192</td>\n    </tr>\n    <tr>\n        <td>2</td>\n        <td>Ernest Perry</td>\n        <td>3</td>\n        <td>m</td>\n        <td>weaponsmith</td>\n        <td>280</td>\n        <td>friendly</td>\n        <td>630197013484</td>\n        <td>255035326205192</td>\n    </tr>\n</table>\nTotal: 18 rows affected.",
        "token": "255035326205192"
      }
    ],
    "adventure": 1
  },
  "225973728467568": {
    "kind": "episode",
    "counter": 34,
    "context": "",
    "statement": "You have correctly updated your status. Now update the pilot's state to 'friendly', and show the table `inhabitant`.",
    "salt": "053",
    "formula": "salt_053(sum(nn(hash)) OVER ()) AS token",
    "solutions": [
      {
        "query": "UPDATE inhabitant\nSET state = 'friendly'\nWHERE job = 'pilot';\n\nSELECT *\nFROM inhabitant;",
        "result_head": "<table>\n    <tr>\n        <th>personid</th>\n        <th>name</th>\n        <th>villageid</th>\n        <th>gender</th>\n        <th>job</th>\n        <th>gold</th>\n        <th>state</th>\n        <th>hash</th>\n        <th>token</th>\n    </tr>\n    <tr>\n        <td>1</td>\n        <td>Paul Bakerman</td>\n        <td>1</td>\n        <td>m</td>\n        <td>baker</td>\n        <td>750</td>\n        <td>friendly</td>\n        <td>503254218482</td>\n        <td>150536228948792</td>\n    </tr>\n    <tr>\n        <td>2</td>\n        <td>Ernest Perry</td>\n        <td>3</td>\n        <td>m</td>\n        <td>weaponsmith</td>\n        <td>280</td>\n        <td>friendly</td>\n        <td>630197013484</td>\n        <td>150536228948792</td>\n    </tr>\n</table>\nTotal: 18 rows affected.",
        "token": "150536228948792"
      }
    ],
    "adventure": 1
  },
  "255035326205192": {
    "kind": "episode",
    "counter": 35,
    "context": "You have completed SQLab Island. What a big adventure!",
    "statement": "",
    "salt": "049",
    "solutions": [],
    "adventure": 1
  },
  "150536228948792": {
    "kind": "episode",
    "counter": 35,
    "context": "You have completed SQLab Island. What a big adventure!",
    "statement": "",
    "salt": "049",
    "solutions": [],
    "adventure": 1
  },
  "225747327555713": {
    "kind": "episode",
    "counter": 35,
    "context": "You have completed SQLab Island. What a big adventure!",
    "statement": "",
    "salt": "049",
    "solutions": [],
    "adventure": 1
  }
}